function plotMigrations()
clear all
%Load output data
load Aspirations_SenegalTest_SenegalRiverDrought0_28-Feb-2024_10-04-21.mat
migCalibration = output;

%Load Census data
load '../Calibration Testing/migData_census2013.mat';
%Data is already divided by total pop, so multiply to recover absolute mig
%flows
migData = mig_1_region_overall(1:end-1,:) .* sum(popData);


%Select time period for migration matrix
migMatrix = sum(migCalibration.migrationMatrix(:,:,60:80), 3)


%Collapse matrix into 8 x 8 matrix of Admin 1 regions
placeLabels = {"Dakar", "Ziguinchor", "Diourbel", "Saint Louis, Louga, Matam", ...
    "Tambacounda, Kedougou", "Kaolack, Fatick, Kaffrine", "Thiès", "Kolda, Sedhiou", ...
    "Abroad", "NIU"};


regionNames = {"Dakar", "Ziguinchor", "Diourbel", "Saint Louis, Louga, Matam", ...
    "Tambacounda, Kedougou", "Kaolack, Fatick, Kaffrine", "Thiès", "Kolda, Sedhiou"};

collapseColumns = { ...
    [7 14 33 36], ...
    [3 32 45], ...
    [2 8 28], ...
    [6 17 19 24 25 27 34 35 37], ...
    [1 12 20 22 38 39 41], ...
    [4 9 10 11 15 16 18 23 26 31], ...
    [29 42 43], ...
    [5 13 21 30 40 44], ...
    };

tempMat = migMatrix;
            tempMat = [sum(tempMat(:,collapseColumns{1},end),2) ...
                sum(tempMat(:,collapseColumns{2},end),2) ...
                sum(tempMat(:,collapseColumns{3},end),2) ...
                sum(tempMat(:,collapseColumns{4},end),2) ...
                sum(tempMat(:,collapseColumns{5},end),2) ...
                sum(tempMat(:,collapseColumns{6},end),2) ...
                sum(tempMat(:,collapseColumns{7},end),2) ...
                sum(tempMat(:,collapseColumns{8},end),2) ...
                ];
            tempMat = [sum(tempMat(collapseColumns{1},:)); ...
                sum(tempMat(collapseColumns{2},:)); ...
                sum(tempMat(collapseColumns{3},:)); ...
                sum(tempMat(collapseColumns{4},:)); ...
                sum(tempMat(collapseColumns{5},:)); ...
                sum(tempMat(collapseColumns{6},:)); ...
                sum(tempMat(collapseColumns{7},:)); ...
                sum(tempMat(collapseColumns{8},:)) ...
                ]

BCC=biChordChart(tempMat,'Label',regionNames,'Arrow','on');
BCC = BCC.draw();
BCC.tickState('off')
BCC.setFont('FontName', 'Cambria', 'FontSize', 17)
BCC.setLabelRadius(1.3);
BCC.tickLabelState('off')

%savefig('MigrationChordDiagram_EdTest.fig')
end